<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="Scripts/jquery-1.6.4.min.js"></script>
    <script src="Scripts/jquery.signalR-2.4.3.min.js"></script>
    <script>
        $(function () {
            var info = $("#info");
            var cnn = $.connection("chat");
            cnn.received(function (data) {
                info.append("<p>" + data + "</p>");
            });
            $("#desligar").click(function () {
                cnn.stop();
                $("#desligar").attr("disabled", true);
                $("#enviar").attr("disabled", true);
            });
            $("#enviar").click(function () {
                cnn.send($("#msg").val());
            });
            cnn.start()
                .done(function () {
                    info.append("<p>Ligação estabelecida.</p>");
                    $("#desligar").attr("disabled", false);
                    $("#enviar").attr("disabled", false);
                })
                .fail(function () {
                    info.append("<p>Ocorreu um erro ao estabelecer a ligação</p>");
                });
        });
    </script>
</head>
<body>
    <h1>Cliente de SignalR</h1>
    <div id="info"></div>
    <textarea id="msg"></textarea>
    <button id="enviar" disabled="disabled">Enviar</button>
    <button id="desligar" disabled="disabled">Desligar</button>
</body>
</html>